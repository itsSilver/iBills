(window.webpackJsonp=window.webpackJsonp||[]).push([[54,2,8,9,13,37],{341:function(t,e,n){var content=n(345);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(59).default)("bde3a3e8",content,!0,{sourceMap:!1})},342:function(t,e,n){"use strict";n.r(e);var l={name:"CardComponent",props:{title:{type:String,default:null},icon:{type:String,default:null},headerIcon:{type:String,default:null}},methods:{headerIconClick:function(){this.$emit("header-icon-click")}}},o=n(4),component=Object(o.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card"},[t.title?n("header",{staticClass:"card-header"},[n("p",{staticClass:"card-header-title"},[t.icon?n("b-icon",{attrs:{icon:t.icon,"custom-size":"default"}}):t._e(),t._v("\n      "+t._s(t.title)+"\n    ")],1),t._v(" "),t._t("navtop")],2):t._e(),t._v(" "),n("div",{staticClass:"card-content"},[t._t("default")],2)])}),[],!1,null,null,null);e.default=component.exports},343:function(t,e,n){var content=n(358);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(59).default)("38a4c900",content,!0,{sourceMap:!1})},344:function(t,e,n){"use strict";n(341)},345:function(t,e,n){var l=n(58)(!1);l.push([t.i,".custom-navtop[data-v-08795142]{align-items:center;grid-gap:1rem;gap:1rem;margin-right:1rem}",""]),t.exports=l},346:function(t,e,n){"use strict";n.r(e);var l={name:"ModalBox",props:{isActive:{type:Boolean,default:!1},trashObjectName:{type:String,default:null}},data:function(){return{isModalActive:!1}},watch:{isActive:function(t){this.isModalActive=t},isModalActive:function(t){t||this.cancel()}},methods:{cancel:function(){this.$emit("cancel")},confirm:function(){this.$emit("confirm")}}},o=n(4),component=Object(o.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{attrs:{active:t.isModalActive,"has-modal-card":""},on:{"update:active":function(e){t.isModalActive=e}}},[n("div",{staticClass:"modal-card"},[n("header",{staticClass:"modal-card-head"},[n("p",{staticClass:"modal-card-title"},[t._v(t._s(t.$t("messages.confirm")))])]),t._v(" "),n("section",{staticClass:"modal-card-body"},[n("p",{domProps:{innerHTML:t._s(t.$t("warehouse.delete",{name:t.trashObjectName}))}})]),t._v(" "),n("footer",{staticClass:"modal-card-foot"},[n("button",{staticClass:"button is-small",attrs:{type:"button"},on:{click:t.cancel}},[t._v("\n        "+t._s(t.$t("navtop.cancel"))+"\n      ")]),t._v(" "),n("button",{staticClass:"button is-small is-danger",on:{click:t.confirm}},[t._v("\n        "+t._s(t.$t("navtop.delete"))+"\n      ")])])])])}),[],!1,null,null,null);e.default=component.exports},347:function(t,e,n){"use strict";n.r(e);var l={name:"NavTopMenu",data:function(){return{}},props:["deleteAll"]},o=(n(344),n(4)),component=Object(o.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"is-flex custom-navtop"},[t._t("default"),t._v(" "),n("button",{staticClass:"button is-primary is-small",attrs:{type:"button"},on:{click:function(e){return t.$emit("new-document")}}},[n("b-icon",{attrs:{icon:"plus-thick",size:"is-small"}}),t._v(" "),n("span",[t._v(" "+t._s(t.$t("navtop.create"))+" ")])],1),t._v(" "),t.deleteAll?n("button",{staticClass:"button is-danger is-small",attrs:{type:"button"},on:{click:function(e){return t.$emit("delete-selected")}}},[n("b-icon",{attrs:{icon:"trash-can",size:"is-small"}}),t._v(" "),n("span",[t._v(" "+t._s(t.$t("navtop.delete_selected"))+" ")])],1):t._e()],2)}),[],!1,null,"08795142",null);e.default=component.exports},357:function(t,e,n){"use strict";n(343)},358:function(t,e,n){var l=n(58)(!1);l.push([t.i,".header-title[data-v-9eb3f5f2]{font-size:1.25rem;text-align:center;text-transform:capitalize}.modal-card-foot[data-v-9eb3f5f2]{display:flex;justify-content:space-between}.modal-card-body[data-v-9eb3f5f2]{border-bottom-right-radius:6px;border-bottom-left-radius:6px;border-bottom:1px solid #f1f2f2}",""]),t.exports=l},361:function(t,e,n){"use strict";n.r(e);var l={data:function(){return{isNewModalActive:!1}},watch:{isActiveNew:function(t){this.isNewModalActive=t},isNewModalActive:function(t){t||this.cancel()}},methods:{cancel:function(){this.$emit("cancel")},confirm:function(){this.$emit("confirm")}},props:{isActiveNew:{type:Boolean,default:!1},title:{type:String,default:null}}},o=(n(357),n(4)),component=Object(o.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{attrs:{active:t.isNewModalActive,width:720,scroll:"keep"},on:{"update:active":function(e){t.isNewModalActive=e}}},[n("div",{},[n("header",{staticClass:"modal-card-head"},[n("p",{staticClass:"modal-card-title header-title"},[n("b",[t._v(t._s(t.title))])])]),t._v(" "),n("section",{staticClass:"modal-card-body"},[t._t("default")],2)])])}),[],!1,null,"9eb3f5f2",null);e.default=component.exports},403:function(t,e,n){"use strict";n.r(e);var l={name:"HeroBar",props:{hasRightVisible:{type:Boolean,default:!0}}},o=n(4),component=Object(o.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"hero is-hero-bar"},[n("div",{staticClass:"hero-body"},[n("div",{staticClass:"level"},[n("div",{staticClass:"level-left"},[n("div",{staticClass:"level-item"},[n("h1",{staticClass:"title"},[t._t("default")],2)])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.hasRightVisible,expression:"hasRightVisible"}],staticClass:"level-right"},[n("div",{staticClass:"level-item"},[t._t("right")],2)])])])])}),[],!1,null,null,null);e.default=component.exports},440:function(t,e,n){"use strict";n.r(e);var l=n(6),o=(n(43),n(60),n(346)),r=n(347),c=n(361),d={components:{ModalBox:o.default,NavTopMenu:r.default,NewModal:c.default},name:"Users",head:function(){return{title:"".concat(this.$t("nav.users")," â€” ").concat(this.$t("messages.title"))}},data:function(){return{dataTable:[],total:0,loading:!1,page:1,perPage:10,checkboxPosition:"left",checkedRows:[],paginated:!1,isModalActive:!1,deleteAll:!1,isDeleteActive:!1,isNewModalActive:!1,isUpdateModalActive:!1,form:{name:null,type:null,address:null,role:{id:null}},updateData:{name:null,type:null,address:null,role:{id:null}},isLoading:!1,trashObject:null,roles:[]}},computed:{trashObjectName:function(){if(this.trashObject)return this.trashObject.full_name}},watch:{checkedRows:function(t){0!==t.length?this.deleteAll=!0:this.deleteAll=!1}},methods:{getRoles:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("/users-permissions/roles",{headers:{Authorization:"Bearer ".concat(t.$auth.strategy.token.get()),"Content-Type":"application/json"}}).then((function(e){t.roles=e.data.roles}));case 2:case"end":return e.stop()}}),e)})))()},onDeleteSelected:function(){this.isDeleteActive=!0},updateCompany:function(t){var e=this;return Object(l.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.$axios.get("/users/".concat(t),{headers:{Authorization:"Bearer ".concat(e.$auth.strategy.token.get()),"Content-Type":"application/json"}}).then((function(t){e.updateData=t.data,e.isUpdateModalActive=!0})).catch((function(t){console.log("err",t)}));case 1:case"end":return n.stop()}}),n)})))()},onSubmit:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={email:t.form.email,password:t.form.password,username:t.form.username,full_name:t.form.full_name,confirmed:!0,role:t.form.role.id},e.next=3,t.$axios.post("/users",n,{headers:{Authorization:"Bearer ".concat(t.$auth.strategy.token.get()),"Content-Type":"application/json"}}).then((function(e){t.$buefy.snackbar.open({message:"".concat(t.$t("messages.created",{name:e.data.full_name})),queue:!1}),t.loadAsyncData().then((function(){t.isNewModalActive=!1}))})).catch((function(e){t.isNewModalActive=!1,t.$buefy.snackbar.open({message:"".concat(t.$t("messages.error")),queue:!1})}));case 3:case"end":return e.stop()}}),e)})))()},onUpdate:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoading=!0,n={email:t.updateData.email,username:t.updateData.username,full_name:t.updateData.full_name,role:t.updateData.role.id},e.next=4,t.$axios.put("/users/".concat(t.updateData.id),n,{headers:{Authorization:"Bearer ".concat(t.$auth.strategy.token.get()),"Content-Type":"application/json"}}).then((function(e){t.isUpdateModalActive=!1,t.isLoading=!1,t.loadAsyncData().then((function(){t.$buefy.snackbar.open({message:"".concat(t.$t("messages.updated",{name:e.data.full_name})),queue:!1})}))})).catch((function(e){t.$buefy.snackbar.open({message:"".concat(t.$t("messages.error")),queue:!1})}));case 4:case"end":return e.stop()}}),e)})))()},cancelNewModal:function(){this.isNewModalActive=!1},cancelUpdateModal:function(){this.isUpdateModalActive=!1},cancelDeleteModal:function(){this.isDeleteActive=!1},onNewDocument:function(){this.isNewModalActive=!0},loadAsyncData:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$axios.get("/users",{params:{_limit:-1},headers:{Authorization:"Bearer ".concat(t.$auth.strategy.token.get()),"Content-Type":"application/json"}}).then((function(e){t.dataTable=e.data,t.dataTable.length>t.perPage&&(t.paginated=!0),t.loading=!1})).catch((function(e){throw t.$buefy.snackbar.open({message:"".concat(t.$t("messages.error")),queue:!1}),t.dataTable=[],t.total=0,t.loading=!1,e}));case 3:case"end":return e.stop()}}),e)})))()},onPageChange:function(t){this.page=t,this.loadAsyncData()},trashModal:function(t){this.trashObject=t,this.isModalActive=!0},trashConfirm:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$axios.delete("/users/".concat(t.trashObject.id),{headers:{Authorization:"Bearer ".concat(t.$auth.strategy.token.get()),"Content-Type":"application/json"}}).then((function(e){t.loadAsyncData().then((function(){t.isModalActive=!1,t.loading=!1,t.$buefy.snackbar.open({message:"".concat(t.$t("messages.deleted",{name:e.data.full_name})),queue:!1,type:"is-success"})}))})).catch((function(e){throw t.$buefy.snackbar.open({message:"".concat(t.$t("messages.error")),queue:!1}),t.loading=!1,e}));case 3:case"end":return e.stop()}}),e)})))()},trashCancel:function(){this.isModalActive=!1}},filters:{truncate:function(t,e){return t.length>e?t.substr(0,e)+"...":t}},mounted:function(){this.loadAsyncData(),this.getRoles()}},m=n(4),component=Object(m.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("hero-bar",[t._v("\n    "+t._s(t.$t("nav.users"))+"\n    "),n("nuxt-link",{staticClass:"button is-small",attrs:{slot:"right",to:"/"},slot:"right"},[t._v("\n      "+t._s(t.$t("nav.dashboard"))+"\n    ")])],1),t._v(" "),n("section",{staticClass:"section is-main-section is-fullheight"},[n("card-component",{staticClass:"has-table has-mobile-sort-spaced",attrs:{title:t.$t("nav.users"),icon:"account"},scopedSlots:t._u([{key:"navtop",fn:function(){return[n("nav-top-menu",{attrs:{deleteAll:t.deleteAll},on:{"new-document":t.onNewDocument,"delete-selected":t.onDeleteSelected}})]},proxy:!0}])},[t._v(" "),n("div",[n("modal-box",{attrs:{"is-active":t.isModalActive,"trash-object-name":t.trashObjectName},on:{confirm:t.trashConfirm,cancel:t.trashCancel}}),t._v(" "),n("b-table",{attrs:{loading:t.loading,paginated:t.paginated,"per-page":t.perPage,striped:!0,hoverable:!0,"default-sort":"full_name",data:t.dataTable}},[n("b-table-column",{attrs:{label:t.$t("table.full_name"),field:"full_name",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.full_name)+"\n          ")]}}])}),t._v(" "),n("b-table-column",{attrs:{label:t.$t("table.email"),field:"email",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.email)+"\n          ")]}}])}),t._v(" "),n("b-table-column",{attrs:{label:t.$t("table.role"),field:"role"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.role.name)+"\n          ")]}}])}),t._v(" "),n("b-table-column",{staticClass:"is-actions-cell",attrs:{"custom-key":"actions",label:t.$t("table.action"),centered:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"buttons is-right"},[n("button",{staticClass:"button is-warning is-small",attrs:{type:"button"},on:{click:function(n){return n.preventDefault(),t.updateCompany(e.row.id)}}},[n("b-icon",{attrs:{icon:"account-edit",size:"is-small"}})],1),t._v(" "),n("button",{staticClass:"button is-danger is-small",attrs:{type:"button"},on:{click:function(n){return n.preventDefault(),t.trashModal(e.row)}}},[n("b-icon",{attrs:{icon:"trash-can",size:"is-small"}})],1)])]}}])}),t._v(" "),n("section",{staticClass:"section",attrs:{slot:"empty"},slot:"empty"},[n("div",{staticClass:"content has-text-grey has-text-centered"},[t.loading?[n("p",[n("b-icon",{attrs:{icon:"dots-horizontal",size:"is-large"}})],1),t._v(" "),n("p",[t._v(t._s(t.$t("messages.fetching")))])]:[n("p",[n("b-icon",{attrs:{icon:"emoticon-sad",size:"is-large"}})],1),t._v(" "),n("p",[t._v(t._s(t.$t("messages.not_found")))])]],2)])],1)],1)])],1),t._v(" "),n("new-modal",{attrs:{"is-active-new":t.isNewModalActive,title:t.$t("user.create")},on:{cancel:t.cancelNewModal}},[n("div",[n("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("b-field",[n("b-input",{attrs:{icon:"account",placeholder:t.$t("table.username"),name:"username",size:"is-small",required:""},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1)],1),t._v(" "),n("div",{staticClass:"column"},[n("b-field",[n("b-input",{attrs:{icon:"email",placeholder:t.$t("table.email"),name:"email",type:"email",size:"is-small",required:""},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1)],1)]),t._v(" "),n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("b-field",[n("b-input",{attrs:{icon:"account",placeholder:t.$t("table.full_name"),name:"full_name",size:"is-small",required:""},model:{value:t.form.full_name,callback:function(e){t.$set(t.form,"full_name",e)},expression:"form.full_name"}})],1)],1),t._v(" "),n("div",{staticClass:"column"},[n("b-field",[n("b-input",{attrs:{icon:"lock",placeholder:t.$t("table.password"),name:"password",size:"is-small",type:"password","password-reveal":"",required:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1)],1)]),t._v(" "),n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("b-field",[n("b-select",{attrs:{placeholder:t.$t("table.role"),icon:"lock",size:"is-small",expanded:""},model:{value:t.form.role.id,callback:function(e){t.$set(t.form.role,"id",e)},expression:"form.role.id"}},t._l(t.roles,(function(option){return n("option",{key:option.id,domProps:{value:option.id}},[t._v("\n                  "+t._s(option.name)+"\n                ")])})),0)],1)],1)]),t._v(" "),n("hr"),t._v(" "),n("div",{staticClass:"is-flex footer-new-modal"},[n("b-button",{staticClass:"button is-small",attrs:{type:"button"},on:{click:t.cancelNewModal}},[t._v("\n            "+t._s(t.$t("navtop.cancel"))+"\n          ")]),t._v(" "),n("button",{staticClass:"button is-primary is-small",attrs:{type:"submit"}},[t._v("\n            "+t._s(t.$t("navtop.create"))+"\n          ")])],1)])])]),t._v(" "),n("new-modal",{attrs:{"is-active-new":t.isUpdateModalActive,title:t.$t("user.update")},on:{cancel:t.cancelUpdateModal}},[n("div",[n("form",{on:{submit:function(e){return e.preventDefault(),t.onUpdate.apply(null,arguments)}}},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("b-field",{attrs:{label:t.$t("table.username")}},[n("b-input",{attrs:{icon:"account",placeholder:"Username",name:"username",size:"is-small",required:""},model:{value:t.updateData.username,callback:function(e){t.$set(t.updateData,"username",e)},expression:"updateData.username"}})],1)],1),t._v(" "),n("div",{staticClass:"column"},[n("b-field",{attrs:{label:t.$t("table.email")}},[n("b-input",{attrs:{icon:"email",placeholder:"Email",name:"email",size:"is-small",type:"email",required:""},model:{value:t.updateData.email,callback:function(e){t.$set(t.updateData,"email",e)},expression:"updateData.email"}})],1)],1)]),t._v(" "),n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("b-field",{attrs:{label:t.$t("table.full_name")}},[n("b-input",{attrs:{icon:"account",size:"is-small",placeholder:"Full Name",name:"full_name",required:""},model:{value:t.updateData.full_name,callback:function(e){t.$set(t.updateData,"full_name",e)},expression:"updateData.full_name"}})],1)],1),t._v(" "),n("div",{staticClass:"column"},[n("b-field",{attrs:{label:t.$t("table.role")}},[n("b-select",{attrs:{placeholder:t.$t("table.role"),icon:"lock",size:"is-small",expanded:""},model:{value:t.updateData.role.id,callback:function(e){t.$set(t.updateData.role,"id",e)},expression:"updateData.role.id"}},t._l(t.roles,(function(option){return n("option",{key:option.id,domProps:{value:option.id}},[t._v("\n                  "+t._s(option.name)+"\n                ")])})),0)],1)],1)]),t._v(" "),n("hr"),t._v(" "),n("div",{staticClass:"is-flex footer-new-modal"},[n("b-button",{staticClass:"button is-small",attrs:{type:"button"},on:{click:t.cancelUpdateModal}},[t._v("\n            "+t._s(t.$t("navtop.cancel"))+"\n          ")]),t._v(" "),n("button",{staticClass:"button is-primary is-small",attrs:{type:"submit"}},[t._v("\n            "+t._s(t.$t("navtop.update"))+"\n          ")])],1),t._v(" "),n("b-loading",{model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}})],1)])])],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{HeroBar:n(403).default,ModalBox:n(346).default,CardComponent:n(342).default})}}]);